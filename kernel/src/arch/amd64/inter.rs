const GDT: [u8; 48] = [
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0xff, 0xff, 0x00, 0x00, 0x00, 0x9a, 0xcf, 0x00,
    0xff, 0xff, 0x00, 0x00, 0x00, 0x92, 0xcf, 0x00,
    0xff, 0xff, 0x00, 0x00, 0x00, 0xfa, 0xcf, 0x00,
    0xff, 0xff, 0x00, 0x00, 0x00, 0xf2, 0xcf, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
];

#[repr(C, packed)]
#[derive(Debug, Clone, Copy)]
pub struct TSS {
    _r0: u32, rsp0: u64, rsp1: u64, rsp2: u64,
    _r1: u64, ist1: u64, ist2: u64, ist3: u64, ist4: u64, ist5: u64, ist6: u64, ist7: u64,
    _r2: u64, _r3: u16, iomap_base: u16
}

impl TSS {
    pub const fn new() -> Self {
        TSS {
            _r0: 0, rsp0: 0, rsp1: 0, rsp2: 0,
            _r1: 0, ist1: 0, ist2: 0, ist3: 0, ist4: 0, ist5: 0, ist6: 0, ist7: 0,
            _r2: 0, _r3: 0, iomap_base: size_of::<TSS>() as u16
        }
    }
}
